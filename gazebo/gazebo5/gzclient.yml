gzclient:
    image: "gazebo:gzclient5"
    volumes:
        - "/tmp/.X11-unix:/tmp/.X11-unix:rw"
        - "/tmp/.docker.xauth:/tmp/.docker.xauth:rw"
    devices:
        - "/dev/nvidia0"
        - "/dev/nvidiactl"
    links:
        - "gzserver"
    environment:
        - "DISPLAY"
        - "QT_X11_NO_MITSHM=1"
        - "GAZEBO_MASTER_URI=http://gzserver:11345"
    # command: "'apt-get install -y gedit && gedit'"
    command: "'gzclient'"

gzserver:
    extends:
        file: "gzserver.yml"
        service: "gzserver"

# map $GZSERVER_PORT_7681_TCP_ADDR -p $GZSERVER_PORT_11345_TCP_PORT,$GZSERVER_PORT_7681_TCP_PORT

# docker run \
# 	-it --rm \
# 	--volume=/tmp/.X11-unix:/tmp/.X11-unix:rw \
# 	--volume=/tmp/.docker.xauth:/tmp/.docker.xauth:rw \
# 	--env="DISPLAY=${DISPLAY}" \
# 	--device /dev/nvidia0:/dev/nvidia0 \
# 	--device /dev/nvidiactl:/dev/nvidiactl \
#     gazebo:gzclient5 bash
